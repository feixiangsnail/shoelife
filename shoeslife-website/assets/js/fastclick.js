function FastClick(d){var f,e=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=10;this.layer=d;if(!d||!d.nodeType){throw new TypeError("Layer must be a document node");}this.onClick=function(){return FastClick.prototype.onClick.apply(e,arguments);};this.onMouse=function(){return FastClick.prototype.onMouse.apply(e,arguments);};this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(e,arguments);};this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(e,arguments);};this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(e,arguments);};if(FastClick.notNeeded(d)){return;}if(this.deviceIsAndroid){d.addEventListener("mouseover",this.onMouse,true);d.addEventListener("mousedown",this.onMouse,true);d.addEventListener("mouseup",this.onMouse,true);}d.addEventListener("click",this.onClick,true);d.addEventListener("touchstart",this.onTouchStart,false);d.addEventListener("touchend",this.onTouchEnd,false);d.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){d.removeEventListener=function(c,a,h){var b=Node.prototype.removeEventListener;if(c==="click"){b.call(d,c,a.hijacked||a,h);}else{b.call(d,c,a,h);}};d.addEventListener=function(b,a,c){var h=Node.prototype.addEventListener;if(b==="click"){h.call(d,b,a.hijacked||(a.hijacked=function(g){if(!g.propagationStopped){a(g);}}),c);}else{h.call(d,b,a,c);}};}if(typeof d.onclick==="function"){f=d.onclick;d.addEventListener("click",function(a){f(a);},false);d.onclick=null;}}FastClick.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);FastClick.prototype.needsClick=function(b){switch(b.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(b.disabled){return true;}break;case"input":if((this.deviceIsIOS&&b.type==="file")||b.disabled){return true;}break;case"label":case"video":return true;}return(/\bneedsclick\b/).test(b.className);};FastClick.prototype.needsFocus=function(b){switch(b.nodeName.toLowerCase()){case"textarea":case"select":return true;case"input":switch(b.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false;}return !b.disabled&&!b.readOnly;default:return(/\bneedsfocus\b/).test(b.className);}};FastClick.prototype.sendClick=function(e,h){var f,g;if(document.activeElement&&document.activeElement!==e){document.activeElement.blur();}g=h.changedTouches[0];f=document.createEvent("MouseEvents");f.initMouseEvent("click",true,true,window,1,g.screenX,g.screenY,g.clientX,g.clientY,false,false,false,false,0,null);f.forwardedTouchEvent=true;e.dispatchEvent(f);};FastClick.prototype.focus=function(d){var c;if(this.deviceIsIOS&&d.setSelectionRange){c=d.value.length;d.setSelectionRange(c,c);}else{d.focus();}};FastClick.prototype.updateScrollParent=function(d){var f,e;f=d.fastClickScrollParent;if(!f||!f.contains(d)){e=d;do{if(e.scrollHeight>e.offsetHeight){f=e;d.fastClickScrollParent=e;break;}e=e.parentElement;}while(e);}if(f){f.fastClickLastScrollTop=f.scrollTop;}};FastClick.prototype.getTargetElementFromEventTarget=function(b){if(b.nodeType===Node.TEXT_NODE){return b.parentNode;}return b;};FastClick.prototype.onTouchStart=function(h){var f,g,e;if(h.targetTouches.length>1){return true;}f=this.getTargetElementFromEventTarget(h.target);g=h.targetTouches[0];if(this.deviceIsIOS){e=window.getSelection();if(e.rangeCount&&!e.isCollapsed){return true;}if(!this.deviceIsIOS4){if(g.identifier===this.lastTouchIdentifier){h.preventDefault();return false;}this.lastTouchIdentifier=g.identifier;this.updateScrollParent(f);}}this.trackingClick=true;this.trackingClickStart=h.timeStamp;this.targetElement=f;this.touchStartX=g.pageX;this.touchStartY=g.pageY;if((h.timeStamp-this.lastClickTime)<200){h.preventDefault();}return true;};FastClick.prototype.touchHasMoved=function(e){var f=e.changedTouches[0],d=this.touchBoundary;if(Math.abs(f.pageX-this.touchStartX)>d||Math.abs(f.pageY-this.touchStartY)>d){return true;}return false;};FastClick.prototype.findControl=function(b){if(b.control!==undefined){return b.control;}if(b.htmlFor){return document.getElementById(b.htmlFor);}return b.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea");};FastClick.prototype.onTouchEnd=function(n){var l,m,h,j,k,i=this.targetElement;if(this.touchHasMoved(n)||(n.timeStamp-this.trackingClickStart)>300){this.trackingClick=false;this.targetElement=null;}if(!this.trackingClick){return true;}if((n.timeStamp-this.lastClickTime)<200){this.cancelNextClick=true;return true;}this.lastClickTime=n.timeStamp;m=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(this.deviceIsIOSWithBadTarget){k=n.changedTouches[0];i=document.elementFromPoint(k.pageX-window.pageXOffset,k.pageY-window.pageYOffset);}h=i.tagName.toLowerCase();if(h==="label"){l=this.findControl(i);if(l){this.focus(i);if(this.deviceIsAndroid){return false;}i=l;}}else{if(this.needsFocus(i)){if((n.timeStamp-m)>100||(this.deviceIsIOS&&window.top!==window&&h==="input")){this.targetElement=null;return false;}this.focus(i);if(!this.deviceIsIOS4||h!=="select"){this.targetElement=null;n.preventDefault();}return false;}}if(this.deviceIsIOS&&!this.deviceIsIOS4){j=i.fastClickScrollParent;if(j&&j.fastClickLastScrollTop!==j.scrollTop){return true;}}if(!this.needsClick(i)){n.preventDefault();this.sendClick(i,n);}return false;};FastClick.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null;};FastClick.prototype.onMouse=function(b){if(!this.targetElement){return true;}if(b.forwardedTouchEvent){return true;}if(!b.cancelable){return true;}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(b.stopImmediatePropagation){b.stopImmediatePropagation();}else{b.propagationStopped=true;}b.stopPropagation();b.preventDefault();return false;}return true;};FastClick.prototype.onClick=function(d){var c;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true;}if(d.target.type==="submit"&&d.detail===0){return true;}c=this.onMouse(d);if(!c){this.targetElement=null;}return c;};FastClick.prototype.destroy=function(){var b=this.layer;if(this.deviceIsAndroid){b.removeEventListener("mouseover",this.onMouse,true);b.removeEventListener("mousedown",this.onMouse,true);b.removeEventListener("mouseup",this.onMouse,true);}b.removeEventListener("click",this.onClick,true);b.removeEventListener("touchstart",this.onTouchStart,false);b.removeEventListener("touchend",this.onTouchEnd,false);b.removeEventListener("touchcancel",this.onTouchCancel,false);};FastClick.notNeeded=function(c){var d;if(typeof window.ontouchstart==="undefined"){return true;}if((/Chrome\/[0-9]+/).test(navigator.userAgent)){if(FastClick.prototype.deviceIsAndroid){d=document.querySelector("meta[name=viewport]");if(d&&d.content.indexOf("user-scalable=no")!==-1){return true;}}else{return true;}}if(c.style.msTouchAction==="none"){return true;}return false;};FastClick.attach=function(b){return new FastClick(b);};if(typeof define!=="undefined"&&define.amd){define(function(){return FastClick;});}else{if(typeof module!=="undefined"&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick;}else{window.FastClick=FastClick;}}